## node进程笔记

Node是在V8引擎上构建,这意味着它的模型与浏览器类似,js运行到单进程的单线程上,

他带来的好处是:程序状态是唯一的,os调用时较少的上下文的切换,因此可以很好的提高CPU的使用率。

但是单进程单线程也是有缺点的,现在的服务器一般是4核的,而一个Node进程每次

只能利用一个,这里会有一个问题:如何充分利用CPU？

而Node运行到单线程上,一旦这个线程抛出错误,会导致整个服务挂掉,

这里会出现第二个问题:如何保证进程的健壮性和稳定性?

这里采用问答的形式。

1. Node如何利用CPU?

Node要采用`多进程架构`

2. `多进程架构`的具体实现模式是什么?

采用`Master-Worker`模式,又称主从模式

3. 那什么是`主从模式`?

把进程分为两部分:主进程和从进程

4. Node可以采用什么方式复制进程?
	1. Node可以采用fork方法复制进程,这个独立的进程中有这全新的V8实例。
	2. spawn(),启动一个子进程来执行命令
	3. exec()
	4. execFile()

5. Node进程间是如何通信的?

创建子进程后,父进程和子进程之间会创建IPC通道,通过IPC,父子进程才能通过message和send()传递消息。

6. 进程间通信的原理是？

Node是通过IPC(Inter-Process Communication, 进程间通信)进行进程间通信的,Node实现IPC通道的是管道

(pipe),具体实现细节有libuv实现,而表现到应用层上的进程通信只有简单的message事件和send()方法,

 detail: 父进程在实际创建子进程之前,会创建IPC通道并监听它,然后才真正创建出子进程,并告诉这个子进程的

 文件描述符,子进程在启动的过程中,根据文件描述符去连接已经存在的IPC通道,从而完成父子进程连接。






